!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/platform-browser"),require("@angular/core"),require("@angular/common")):"function"==typeof define&&define.amd?define("ngx-widget-grid",["exports","@angular/platform-browser","@angular/core","@angular/common"],e):e(t["ngx-widget-grid"]={},t.ng.platformBrowser,t.ng.core,t.ng.common)}(this,function(t,e,r,i){"use strict";var o=function(){function t(t,e){this._height=0,this._width=0,this._height=t?100/t:0,this._width=e?100/e:0}return Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),t}(),n=function(){function t(t,e){this._widgets=[],this._rows=3,this._columns=3,+t&&(this._rows=+t),+e&&(this._columns=+e),this._cellSize=new o(this._rows,this._columns)}return Object.defineProperty(t.prototype,"widgets",{get:function(){return this._widgets},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rows",{get:function(){return this._rows},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"columns",{get:function(){return this._columns},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cellSize",{get:function(){return this._cellSize},enumerable:!0,configurable:!0}),t.prototype.add=function(t){this._widgets.push(t)},t.prototype.remove=function(t){var e=this._widgets.indexOf(t);-1<e&&this._widgets.splice(e,1)},t.prototype.removeAll=function(){this._widgets.splice(0)},t.prototype.hasWidget=function(t){return-1<this._widgets.indexOf(t)},t.prototype.resize=function(t,e){t=+t||0,(0<(e=+e||0)&&0<t&&e!==this._columns||t!==this._rows)&&(this._columns=e,this._rows=t,this._cellSize=new o(this._rows,this._columns))},t}(),m=function(){function t(t){this.top=0,this.left=0,this.width=0,this.height=0,t&&(this.top=+t.top||0,this.left=+t.left||0,this.width=+t.width||0,this.height=+t.height||0)}return Object.defineProperty(t.prototype,"bottom",{get:function(){return this.top+this.height-1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.left+this.width-1},enumerable:!0,configurable:!0}),t.prototype.getSurfaceArea=function(){return this.height*this.width},t}(),s=function(){function t(t){this._position=new m,this.id=this.generateUID(),t&&(this.position=t)}return Object.defineProperty(t.prototype,"position",{get:function(){return this._position},set:function(t){this._position.top=+t.top?+t.top:0,this._position.left=+t.left?+t.left:0,this._position.width=+t.width?+t.width:0,this._position.height=+t.height?+t.height:0},enumerable:!0,configurable:!0}),t.prototype.generateUID=function(){return"ngxDashboardWidget-"+ ++t.widgetCount},t.widgetCount=0,t}(),u=function(){function t(){}return t.isNumber=function(t){return"number"==typeof t},t.isDefined=function(t){return t!==undefined},t.isObject=function(t){return"object"==typeof t},t}(),h={topLeft:"NW",top:"N",topRight:"NE",right:"E",bottomRight:"SE",bottom:"S",bottomLeft:"SW",left:"W"},d=[h.bottom,h.left,h.right,h.top,h.bottomLeft,h.bottomRight,h.topLeft,h.topRight],g=function(){function t(t){this.elRef=t,this.swapOnMove=!1,this.positionChange=new r.EventEmitter,this.movable=!1,this.allDirections=h,this.isTopResizable=!1,this.isRightResizable=!1,this.isBottomResizable=!1,this.isLeftResizable=!1,this.isTopRightResizable=!1,this.isTopLeftResizable=!1,this.isBottomRightResizable=!1,this.isBottomLeftResizable=!1,this._resizable=!1,this._resizeDirections=d,this.widgetConfig=new s(this.position)}return Object.defineProperty(t.prototype,"position",{get:function(){return this._position},set:function(t){this._position=t,this.widgetConfig.position=t,this.positionChange.emit(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"resizable",{get:function(){return this._resizable},set:function(t){(this._resizable=t)&&this.setResizeDirections()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"resizeDirections",{get:function(){return this._resizeDirections},set:function(t){this._resizeDirections=t.filter(function(t){return-1!==d.indexOf(t.toUpperCase())}),this.setResizeDirections()},enumerable:!0,configurable:!0}),t.prototype.setResizeDirections=function(){var e=this;this.isTopResizable=!1,this.isRightResizable=!1,this.isBottomResizable=!1,this.isLeftResizable=!1,this.isTopRightResizable=!1,this.isTopLeftResizable=!1,this.isBottomRightResizable=!1,this.isBottomLeftResizable=!1,this._resizeDirections.forEach(function(t){switch(t){case h.top:e.isTopResizable=!0;break;case h.left:e.isLeftResizable=!0;break;case h.bottom:e.isBottomResizable=!0;break;case h.right:e.isRightResizable=!0;break;case h.topLeft:e.isTopLeftResizable=!0;break;case h.topRight:e.isTopRightResizable=!0;break;case h.bottomLeft:e.isBottomLeftResizable=!0;break;case h.bottomRight:e.isBottomRightResizable=!0}})},t.prototype.getConfig=function(){return this.widgetConfig},t.prototype.getEl=function(){return this.elRef},t.decorators=[{type:r.Component,args:[{selector:"ngx-widget",template:'<div class="wg-widget-content">\r\n  <ng-content></ng-content>\r\n</div>\r\n<div [ngxWidgetMover]="swapOnMove"\r\n     *ngIf="movable"\r\n     class="wg-widget-edit-move">\r\n</div>\r\n<div *ngIf="resizable"\r\n     class="wg-widget-edit-resize">\r\n  <div class="wg-resize wg-resize-axis wg-resize-n"\r\n       [ngxWidgetResizer]="allDirections.top"\r\n       [hidden]="!isTopResizable"></div>\r\n  <div class="wg-resize wg-resize-axis wg-resize-e"\r\n       [ngxWidgetResizer]="allDirections.right"\r\n       [hidden]="!isRightResizable"></div>\r\n  <div class="wg-resize wg-resize-axis wg-resize-s"\r\n       [ngxWidgetResizer]="allDirections.bottom"\r\n       [hidden]="!isBottomResizable"></div>\r\n  <div class="wg-resize wg-resize-axis wg-resize-w"\r\n       [ngxWidgetResizer]="allDirections.left"\r\n       [hidden]="!isLeftResizable"></div>\r\n  <div class="wg-resize wg-resize-diag wg-resize-nw"\r\n       [ngxWidgetResizer]="allDirections.topLeft"\r\n       [hidden]="!isTopLeftResizable"></div>\r\n  <div class="wg-resize wg-resize-diag wg-resize-ne"\r\n       [ngxWidgetResizer]="allDirections.topRight"\r\n       [hidden]="!isTopRightResizable"></div>\r\n  <div class="wg-resize wg-resize-diag wg-resize-se"\r\n       [ngxWidgetResizer]="allDirections.bottomRight"\r\n       [hidden]="!isBottomRightResizable"></div>\r\n  <div class="wg-resize wg-resize-diag wg-resize-sw"\r\n       [ngxWidgetResizer]="allDirections.bottomLeft"\r\n       [hidden]="!isBottomLeftResizable"></div>\r\n</div>\r\n\r\n',changeDetection:r.ChangeDetectionStrategy.OnPush,styles:[":host{position:absolute}:host .wg-widget-content{position:absolute;overflow:hidden;height:100%;width:100%}:host.wg-moving .wg-widget-content,:host.wg-resizing .wg-widget-content{opacity:.2;z-index:18}:host.wg-moving .wg-widget-edit-move{cursor:move;cursor:-webkit-grabbing}.wg-widget-edit-move{position:absolute;top:6px;right:6px;bottom:6px;left:6px;z-index:20;touch-action:none;cursor:move;cursor:-webkit-grab}.wg-widget-edit-resize{position:absolute;touch-action:none;top:0;right:0;bottom:0;left:0;z-index:15}.wg-resize{position:absolute}.wg-resize-diag{border-color:rgba(0,113,188,.75);border-style:solid;width:0;height:0;z-index:1}.wg-resize-diag:hover{border-color:rgba(0,138,229,.75)}.wg-resize-diag.dragging{border-color:rgba(0,174,239,.75)}.wg-resize-axis{background-color:rgba(0,113,188,.12)}.wg-resize-axis.dragging{background-color:rgba(0,174,239,.24)}.wg-resize-nw{top:0;left:0;cursor:nw-resize;border-width:.5rem .5rem 0 0;border-right-color:transparent!important}.wg-resize-ne{top:0;right:0;cursor:ne-resize;border-width:.5rem 0 0 .5rem;border-left-color:transparent!important}.wg-resize-se{bottom:0;right:0;cursor:se-resize;border-width:0 0 .5rem .5rem;border-left-color:transparent!important}.wg-resize-sw{bottom:0;left:0;cursor:sw-resize;border-width:0 .5rem .5rem 0;border-right-color:transparent!important}.wg-resize-n{top:0;right:0;left:0;height:.25rem;cursor:n-resize}.wg-resize-e{top:0;right:0;bottom:0;width:.25rem;cursor:e-resize}.wg-resize-s{right:0;bottom:0;left:0;height:.25rem;cursor:s-resize}.wg-resize-w{top:0;bottom:0;left:0;width:.25rem;cursor:w-resize}[hidden]{display:none}"]}]}],t.ctorParameters=function(){return[{type:r.ElementRef}]},t.propDecorators={swapOnMove:[{type:r.Input}],positionChange:[{type:r.Output}],movable:[{type:r.Input}],position:[{type:r.Input}],resizable:[{type:r.Input}],resizeDirections:[{type:r.Input}]},t}();var l=function(){function t(t,e){this._top=t,this._left=e}return Object.defineProperty(t.prototype,"top",{get:function(){return this._top},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){return this._left},enumerable:!0,configurable:!0}),t}(),a=function(){function t(t){this.positions={},this.obstructions=[],this.grid=t||new n}return Object.defineProperty(t.prototype,"grid",{get:function(){return this._grid},set:function(t){this._grid=t,this.positions={},this.cachedNextPosition=undefined,this.obstructions=[];for(var e=0;e<t.rows*t.columns;e++)this.obstructions[e]=null},enumerable:!0,configurable:!0}),t.prototype.rasterizeCoords=function(t,e,i,r){t=Math.min(Math.max(t,0),i-1),e=Math.min(Math.max(e,0),r-1);var o=Math.floor(e/r*this.grid.rows)+1,n=Math.floor(t/i*this.grid.columns)+1;return new l(o,n)},t.prototype.getWidgetIdAt=function(t,e){for(var i in this.positions)if(this.positions.hasOwnProperty(i)){var r=this.positions[i];if(r.top<=t&&t<=r.top+r.height-1&&r.left<=e&&e<=r.left+r.width-1)return i}return null},t.prototype.getWidgetPosition=function(t){return this.positions[t]},t.prototype.setWidgetPosition=function(t,e,i){var r=this.positions[t];r&&!i&&this.setObstructionValues(r,null),e=new m({top:u.isNumber(e.top)?e.top:r.top,left:u.isNumber(e.left)?e.left:r.left,width:u.isNumber(e.width)?e.width:r.width,height:u.isNumber(e.height)?e.height:r.height}),this.positions[t]=e,this.setObstructionValues(this.positions[t],t),this.cachedNextPosition=undefined},t.prototype.hasSpaceLeft=function(){var t,e;try{for(var i=function o(t){var e="function"==typeof Symbol&&t[Symbol.iterator],i=0;return e?e.call(t):{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}}}(this.obstructions),r=i.next();!r.done;r=i.next()){if(null===r.value)return!0}}catch(n){t={error:n}}finally{try{r&&!r.done&&(e=i["return"])&&e.call(i)}finally{if(t)throw t.error}}return!1},t.prototype.getNextPosition=function(){if(this.cachedNextPosition!==undefined)return this.cachedNextPosition;if(!this.hasSpaceLeft())return null;var t=this.findLargestEmptyArea();return this.cachedNextPosition=t},t.prototype.isObstructed=function(t,e,i){if(t<1||e<1||e>this.grid.columns||t>this.grid.rows)return!0;var r=i&&i.top+i.height-1,o=i&&i.left+i.width-1;return!(i&&i.top<=t&&t<=r&&i.left<=e&&e<=o)&&this._isObstructed(t,e)},t.prototype._isObstructed=function(t,e){return null!==this.obstructions[(t-1)*this.grid.columns+(e-1)]},t.prototype.isAreaObstructed=function(t,e){if(!t)return!1;e=u.isObject(e)?e:{};var i=t.top,r=t.left,o=t.bottom||t.top+t.height-1,n=t.right||t.left+t.width-1;if(!(u.isNumber(i)&&u.isNumber(r)&&u.isNumber(o)&&u.isNumber(n)))return!1;for(var s=e.fromBottom?o:i,h=e.fromBottom?-1:1,d=(e.fromBottom?i:o)+h,g=e.fromRight?n:r,l=e.fromRight?-1:1,a=(e.fromRight?r:n)+l,p=s;p!==d;p+=h)for(var f=g;f!==a;f+=l)if(this.isObstructed(p,f,e.excludedArea))return!0;return!1},t.prototype.getStyle=function(t){var e=this.positions[t];return e?{top:((e.top-1)*this.grid.cellSize.height).toString()+"%",height:(e.height*this.grid.cellSize.height).toString()+"%",left:((e.left-1)*this.grid.cellSize.width).toString()+"%",width:(e.width*this.grid.cellSize.width).toString()+"%"}:{display:"none"}},t.prototype.setObstructionValues=function(t,e){for(var i=t.top-1;i<t.top+t.height-1;i++)for(var r=t.left-1;r<t.left+t.width-1;r++)this.obstructions[i*this.grid.columns+r]=e},t.prototype.findLargestEmptyArea=function(){for(var t=null,e=null,i=0,r=0,o=1;o<=this.grid.rows;o++)for(var n=1;n<=this.grid.columns;n++)if(!this._isObstructed(o,n)){if((this.grid.rows-o+1)*(this.grid.columns-n+1)<i)break;i<(r=(e=this._findLargestEmptyAreaFrom(new l(o,n))).getSurfaceArea())&&(i=r,t=e)}return t},t.prototype._findLargestEmptyAreaFrom=function(t){if(!u.isDefined(this.grid)||!u.isNumber(this.grid.columns)||!u.isNumber(this.grid.rows))return null;for(var e=null,i=0,r=this.grid.columns,o=t.top;o<=this.grid.rows;o++)for(var n=t.left;n<=r;n++)if(this._isObstructed(o,n))r=n-1;else{var s=o-t.top+1,h=n-t.left+1,d=s*h;i<d&&(i=d,e=new m({top:t.top,left:t.left,width:h,height:s}))}return e},t.prototype.render=function(t,i){var r=this;this.grid=t;var e=this.grid&&this.grid.widgets?this.grid.widgets:[],o=[];e.forEach(function(t){var e=t.position;e.width*e.height==0||r.isAreaObstructed(e)?o.push(t):r.setWidgetPosition(t.id,e,!1)}),o.forEach(function(t){var e=r.getNextPosition();null!==e?(t.position=e,r.setWidgetPosition(t.id,e,!1)):(t.position=new m,r.setWidgetPosition(t.id,new m,!1)),i&&i(t)})},t}(),p=function(){function t(t,e,i){this.el=t,this._changeDetector=e,this._renderer=i,this.showGrid=!1,this.widgetPositionChange=new r.EventEmitter,this.gridFull=new r.EventEmitter,this.gridAlreadyFull=!1,this._highlightNextPosition=!1,this.grid=new n(this.rows,this.columns),this.gridRenderer=new a(this.grid)}return Object.defineProperty(t.prototype,"rows",{get:function(){return this._rows},set:function(t){this._rows=t,this.updateGridSize()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"columns",{get:function(){return this._columns},set:function(t){this._columns=t,this.updateGridSize()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"highlightNextPosition",{get:function(){return this._highlightNextPosition},set:function(t){(this._highlightNextPosition=t)?this.updateNextPositionHighlight():this.resetHighlights()},enumerable:!0,configurable:!0}),t.prototype.ngAfterViewInit=function(){var t=this;this.refreshWidgets(),this.widgetComponents.changes.subscribe(function(){t.clearGrid(),t.refreshWidgets()})},t.prototype.refreshWidgets=function(){var e=this;this.widgetComponents.forEach(function(t){e.hasWidget(t)||e.addWidget(t,!0)}),this.updateRendering()},t.prototype.hasWidget=function(t){return this.grid.hasWidget(t.getConfig())},t.prototype.addWidget=function(t,e){this.grid.add(t.getConfig()),e||this.updateRendering()},t.prototype.clearGrid=function(){this.grid.removeAll()},t.prototype.updateGridSize=function(){var t=this.columns,e=this.rows;this.grid.columns===t&&this.grid.rows===e||(this.grid.resize(e,t),this.updateRendering())},t.prototype.updateRendering=function(){var e=this;this.gridRenderer.render(this.grid,this.emitUpdatePosition.bind(this)),this.updateNextPositionHighlight(),this.widgetComponents&&this.widgetComponents.forEach(function(t){e.updateWidget(t,!1)})},t.prototype.getGridRectangle=function(){var t=this.el.nativeElement,e=t.getBoundingClientRect();if(e.width||e.height||t.getClientRects().length){var i=t.ownerDocument.documentElement;return new m({top:e.top+window.pageYOffset-i.clientTop,left:e.left+window.pageXOffset-i.clientLeft,height:e.height,width:e.width})}return new m({top:0,left:0,height:0,width:0})},t.prototype.rasterizeCoords=function(t,e){return this.gridRenderer.rasterizeCoords(t,e,this.el.nativeElement.clientWidth,this.el.nativeElement.clientHeight)},t.prototype.updateWidget=function(t,e){var i=t.getConfig(),r=i.position,o=t.getEl();this.gridRenderer.setWidgetPosition(i.id,r,e);var n=this.getWidgetStyle(t);for(var s in n)n.hasOwnProperty(s)&&this._renderer.setStyle(o.nativeElement,s,n[s]);this.emitUpdatePosition(i),this.assessAvailableGridSpace()},t.prototype.getWidgetPositionByWidgetId=function(t){return this.gridRenderer.getWidgetPosition(t)},t.prototype.getWidgetPosition=function(t){return this.getWidgetPositionByWidgetId(t.getConfig().id)},t.prototype.getWidgetStyle=function(t){return this.gridRenderer.getStyle(t.getConfig().id)},t.prototype.isPointObstructed=function(t,e){return!this.gridRenderer||this.gridRenderer.isObstructed(t,e)},t.prototype.isAreaObstructed=function(t,e){return!this.gridRenderer||this.gridRenderer.isAreaObstructed(t,e)},t.prototype.areaObstructor=function(t){return this.gridRenderer.obstructions[(t.top-1)*this.grid.columns+(t.left-1)]},t.prototype.highlightArea=function(t){var e=this;t.top&&t.left&&t.height&&t.width&&setTimeout(function(){e.highlightedArea=t,e._changeDetector.markForCheck()})},t.prototype.updateNextPositionHighlight=function(){this.highlightNextPosition&&(this.highlightedArea=this.gridRenderer.getNextPosition())},t.prototype.getNextPosition=function(){return this.gridRenderer.getNextPosition()},t.prototype.getPositions=function(){return this.grid.widgets},t.prototype.resetHighlights=function(){var t=this;setTimeout(function(){t.highlightedArea=null,t._changeDetector.markForCheck()})},t.prototype.emitUpdatePosition=function(t){this.widgetPositionChange.emit({index:this.getWidgetIndex(t),newPosition:new m(t.position)})},t.prototype.getWidgetIndex=function(t){for(var e=this.grid.widgets.length-1;0<=e;e--)if(this.grid.widgets[e].id===t.id)return e;return-1},t.prototype.getWidgetById=function(e){return this.widgetComponents.find(function(t){return t.getConfig().id===e})||null},t.prototype.assessAvailableGridSpace=function(){var t=this.gridRenderer.hasSpaceLeft();this.gridAlreadyFull?t&&(this.gridFull.emit(!1),this.gridAlreadyFull=!1):t||(this.gridFull.emit(!0),this.gridAlreadyFull=!0)},t.decorators=[{type:r.Component,args:[{selector:"ngx-widget-grid",template:'<ngx-grid-overlay [showGrid]="showGrid"\r\n                  [renderer]="gridRenderer"\r\n                  [highlight]="highlightedArea"\r\n                  [cols]="columns"\r\n                  [rows]="rows">\r\n</ngx-grid-overlay>\r\n<div class="wg-grid-widgets">\r\n  <ng-content></ng-content>\r\n</div>\r\n',changeDetection:r.ChangeDetectionStrategy.OnPush,styles:[":host{height:100%;width:100%;position:absolute;overflow:hidden}"]}]}],t.ctorParameters=function(){return[{type:r.ElementRef},{type:r.ChangeDetectorRef},{type:r.Renderer2}]},t.propDecorators={showGrid:[{type:r.Input}],widgetPositionChange:[{type:r.Output}],gridFull:[{type:r.Output}],widgetComponents:[{type:r.ContentChildren,args:[g]}],rows:[{type:r.Input}],columns:[{type:r.Input}],highlightNextPosition:[{type:r.Input}]},t}(),f=function(){function t(t){this.sanitizer=t,this.activeHighlight=null,this.gridRows=[],this.gridCols=[],this._showGrid=!1}return Object.defineProperty(t.prototype,"renderer",{get:function(){return this._renderer},set:function(t){this._renderer=t,u.isDefined(t)&&this.updateGridLines(t,this.showGrid)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rows",{set:function(t){this.updateGridLines(this.renderer,this.showGrid)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cols",{set:function(t){this.updateGridLines(this.renderer,this.showGrid)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"highlight",{get:function(){return this._highlight},set:function(t){this._highlight=t,this.clearHighlight(),t&&this.highlightArea(t,this.renderer)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showGrid",{get:function(){return this._showGrid},set:function(t){this._showGrid=t,this.updateGridLines(this.renderer,t)},enumerable:!0,configurable:!0}),t.prototype.updateGridLines=function(t,e){this.clearGridLines(),e&&this.showGridLines(t)},t.prototype.clearHighlight=function(){this.activeHighlight=null},t.prototype.clearGridLines=function(){this.gridRows.splice(0),this.gridCols.splice(0)},t.prototype.highlightArea=function(t,e){var i=e.grid.cellSize,r=i.height,o=i.width;this.activeHighlight={x:(t.left-1)*o+"%",y:(t.top-1)*r+"%",height:t.height*r+"%",width:t.width*o+"%"},this.sanitizer.bypassSecurityTrustStyle(this.activeHighlight)},t.prototype.showGridLines=function(t){for(var e=t.grid.cellSize.height,i=t.grid.cellSize.width,r=e+"%",o=i+"%",n=t.grid.rows,s=t.grid.columns,h=1;h<n;h+=2){var d,g,l;d=h*e+"%",g="calc("+r+" - 1px)",l={y:this.sanitizer.bypassSecurityTrustStyle(d),height:this.sanitizer.bypassSecurityTrustStyle(g)},this.gridRows.push(l)}for(h=1;h<s;h+=2){var a,p,f;a=h*i+"%",p="calc("+o+" - 1px)",f={x:this.sanitizer.bypassSecurityTrustStyle(a),width:this.sanitizer.bypassSecurityTrustStyle(p)},this.gridCols.push(f)}},t.decorators=[{type:r.Component,args:[{selector:"ngx-grid-overlay",template:'<div class="wg-grid-overlay">\r\n  <div *ngFor="let row of gridRows"\r\n       class="wg-preview-item wg-preview-row"\r\n       [style.height]="row.height"\r\n       [style.top]="row.y"></div>\r\n  <div *ngFor="let column of gridCols"\r\n       class="wg-preview-item wg-preview-column"\r\n       [style.width]="column.width"\r\n       [style.left]="column.x"></div>\r\n  <div *ngIf="activeHighlight"\r\n       class="wg-preview-item wg-preview-highlight"\r\n       [style.top]="activeHighlight.y"\r\n       [style.height]="activeHighlight.height"\r\n       [style.left]="activeHighlight.x"\r\n       [style.width]="activeHighlight.width"></div>\r\n</div>\r\n',changeDetection:r.ChangeDetectionStrategy.OnPush,styles:[".wg-grid-overlay{overflow:hidden}.wg-grid-overlay *{position:absolute;height:100%;width:100%}.wg-grid-overlay .wg-preview-item{position:absolute;display:inline-block}.wg-grid-overlay .wg-preview-item.wg-preview-row{width:100%;border-top:1px dotted #d7d7d7;border-bottom:1px solid #f0f0f0}.wg-grid-overlay .wg-preview-item.wg-preview-column{height:100%;border-left:1px dotted #d7d7d7;border-right:1px solid #f0f0f0}.wg-grid-overlay .wg-preview-item.wg-preview-highlight{background-color:rgba(0,113,188,.2);z-index:1}"]}]}],t.ctorParameters=function(){return[{type:e.DomSanitizer}]},t.propDecorators={renderer:[{type:r.Input}],rows:[{type:r.Input}],cols:[{type:r.Input}],highlight:[{type:r.Input}],showGrid:[{type:r.Input}]},t}(),b=function(){function t(t,e){this._currPos=null,this._nextPos=null,t?e?(this._start=t,this._heightDelta=e.top-t.top,this._widthDelta=e.left-t.left,this._steps=Math.max(Math.abs(this._heightDelta),Math.abs(this._widthDelta)),this._currStep=0,this._currPos=null,this._nextPos=new l(t.top,t.left)):console.error("End not present for Path Iterator"):console.error("Start not present for Path Iterator")}return t.prototype.next=function(){if(this._currPos=this._nextPos,this._currStep<this._steps){this._currStep++;var t=Math.round(this._currStep/this._steps*this._heightDelta),e=Math.round(this._currStep/this._steps*this._widthDelta);this._nextPos=new l(this._start.top+t,this._start.left+e)}else this._nextPos=null;return this._currPos},t.prototype.hasNext=function(){return null!==this._nextPos},t}(),c=function(){function t(t,e,i,r){this.el=t,this.renderer=e,this.gridCmp=i,this.widgetCmp=r,this.enableDrag=null,this._onMoveListener=this.onMove.bind(this),this._onUpListener=this.onUp.bind(this),this.ngxWidgetMover=!1}return t.prototype.onDown=function(t){t.preventDefault(),this.renderer.addClass(this.widgetCmp.getEl().nativeElement,"wg-moving");var e=this.widgetCmp.getEl().nativeElement;this.startPosition=this.gridCmp.getWidgetPosition(this.widgetCmp),this.startRender={top:e.offsetTop,left:e.offsetLeft,height:e.clientHeight,width:e.clientWidth};var i=t.offsetX||t.layerX,r=t.offsetY||t.layerY;this.desiredPosition={top:this.startRender.top,left:this.startRender.left},this.moverOffset=new m({top:r+this.el.nativeElement.offsetTop||0,left:i+this.el.nativeElement.offsetLeft||0}),this.gridPositions=this.gridCmp.getGridRectangle(),this.cellHeight=this.gridCmp.grid.cellSize.height/100*this.gridPositions.height,this.cellWidth=this.gridCmp.grid.cellSize.width/100*this.gridPositions.width,this.enableDrag=this.widgetCmp.getConfig().id,this.renderer.setStyle(this.widgetCmp.getEl().nativeElement,"z-index",this.ngxWidgetMover?0:100),"undefined"!=typeof PointerEvent?(window.addEventListener("pointermove",this._onMoveListener),window.addEventListener("pointerup",this._onUpListener)):(window.addEventListener("mousemove",this._onMoveListener),window.addEventListener("mouseup",this._onUpListener))},t.prototype.onMove=function(t){if(this.enableDrag===this.widgetCmp.getConfig().id){t.preventDefault();var e=t.clientX,i=t.clientY,r=this.startRender,o=this.gridPositions,n=this.desiredPosition,s=Math.round(e)-o.left,h=Math.round(i)-o.top;n.top=Math.min(Math.max(h-this.moverOffset.top,0),o.height-r.height-1),n.left=Math.min(Math.max(s-this.moverOffset.left,0),o.width-r.width-1);var d=this.determineFinalPos(this.startPosition,n,this.startRender,this.cellHeight,this.cellWidth);this.gridCmp.highlightArea(d),this.renderer.setStyle(this.widgetCmp.getEl().nativeElement,"top",n.top+"px"),this.renderer.setStyle(this.widgetCmp.getEl().nativeElement,"left",n.left+"px")}},t.prototype.onUp=function(t){if(this.enableDrag===this.widgetCmp.getConfig().id){t.preventDefault();var e=t.clientX,i=t.clientY,r=this.startRender,o=this.gridPositions,n=this.desiredPosition,s=Math.round(e)-o.left,h=Math.round(i)-o.top;n.top=Math.min(Math.max(h-this.moverOffset.top,0),o.height-r.height-1),n.left=Math.min(Math.max(s-this.moverOffset.left,0),o.width-r.width-1);var d=this.getAnchor(Math.max(h,0),this.cellHeight,1),g=this.getAnchor(Math.max(s,0),this.cellWidth,1),l=this.gridCmp.rasterizeCoords(g,d),a=this.gridCmp.areaObstructor(l),p=void 0;if(a&&this.ngxWidgetMover){var f=this.gridCmp.getWidgetById(a),u=this.gridCmp.getWidgetPositionByWidgetId(a),c=this.widgetCmp.position;this.widgetCmp.position=u,this.gridCmp.updateWidget(this.widgetCmp,!0),f.position=c,this.gridCmp.updateWidget(f,!0)}else p=this.determineFinalPos(this.startPosition,n,this.startRender,this.cellHeight,this.cellWidth),this.widgetCmp.position=p,this.gridCmp.updateWidget(this.widgetCmp,!1);this.gridCmp.resetHighlights(),this.renderer.removeClass(this.widgetCmp.getEl().nativeElement,"wg-moving"),this.renderer.removeStyle(this.widgetCmp.getEl().nativeElement,"z-index"),this.enableDrag=null}"undefined"!=typeof PointerEvent?(window.removeEventListener("pointermove",this._onMoveListener),window.removeEventListener("pointerup",this._onUpListener)):(window.removeEventListener("mousemove",this._onMoveListener),window.removeEventListener("mouseup",this._onUpListener))},t.prototype.getAnchor=function(t,e,i){return void 0===i&&(i=2),e/i<t%e?t+Math.floor(e):t},t.prototype.determineFinalPos=function(t,e,i,r,o){if(i.top===e.top&&i.left===e.left)return t;for(var n=this.getAnchor(e.top,r),s=this.getAnchor(e.left,o),h=n>=i.top,d=s>=i.left,g=this.gridCmp.rasterizeCoords(s,n),l=new b(g,t);l&&l.hasNext();){var a=l.next(),p=new m({top:a.top,left:a.left,height:t.height,width:t.width}),f={excludedArea:t,fromBottom:h,fromRight:d};if(this.ngxWidgetMover&&this.gridCmp.isAreaObstructed(p,f))return new m(t);if(!this.gridCmp.isAreaObstructed(p,f)){var u=p.height,c=p.width;if(g.top<p.top)for(;g.top<=p.top-1;){var w=new m({top:p.top-1,left:p.left,height:u,width:c});if(!!this.gridCmp.isAreaObstructed(w,f))break;p.top--}else if(g.top>p.top)for(;g.top>=p.top+1;){w=new m({top:p.top+1,left:p.left,height:u,width:c});if(!!this.gridCmp.isAreaObstructed(w,f))break;p.top++}if(g.left<p.left)for(;g.left<=p.left-1;){w=new m({top:p.top,left:p.left-1,height:u,width:c});if(!!this.gridCmp.isAreaObstructed(w,f))break;p.left--}else if(g.left>p.left)for(;g.left>=p.left+1;){w=new m({top:p.top,left:p.left+1,height:u,width:c});if(!!this.gridCmp.isAreaObstructed(w,f))break;p.left++}return new m(p)}}return new m(t)},t.decorators=[{type:r.Directive,args:[{selector:"[ngxWidgetMover]"}]}],t.ctorParameters=function(){return[{type:r.ElementRef},{type:r.Renderer2},{type:p,decorators:[{type:r.Inject,args:[r.forwardRef(function(){return p})]}]},{type:g,decorators:[{type:r.Inject,args:[r.forwardRef(function(){return g})]}]}]},t.propDecorators={ngxWidgetMover:[{type:r.Input}],onDown:[{type:r.HostListener,args:["mousedown",["$event"]]},{type:r.HostListener,args:["pointerdown",["$event"]]}]},t}(),w=function(){function t(t,e,i,r){this.el=t,this.renderer=e,this.gridCmp=i,this.widgetCmp=r,this.moveUpAllowed=!1,this.moveDownAllowed=!1,this.moveLeftAllowed=!1,this.moveRightAllowed=!1,this.enableDrag=null,this._onMoveListener=this.onMove.bind(this),this._onUpListener=this.onUp.bind(this),this.parentContainer=this.el.nativeElement.parentElement}return Object.defineProperty(t.prototype,"resizeDirection",{get:function(){return this._resizeDirection},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngxWidgetResizer",{set:function(t){switch(this._resizeDirection=t,this.moveUpAllowed=!1,this.moveDownAllowed=!1,this.moveLeftAllowed=!1,this.moveRightAllowed=!1,t){case h.top:this.moveUpAllowed=!0;break;case h.left:this.moveLeftAllowed=!0;break;case h.bottom:this.moveDownAllowed=!0;break;case h.right:this.moveRightAllowed=!0;break;case h.topLeft:this.moveUpAllowed=!0,this.moveLeftAllowed=!0;break;case h.topRight:this.moveUpAllowed=!0,this.moveRightAllowed=!0;break;case h.bottomLeft:this.moveDownAllowed=!0,this.moveLeftAllowed=!0;break;case h.bottomRight:this.moveDownAllowed=!0,this.moveRightAllowed=!0}},enumerable:!0,configurable:!0}),t.prototype.onDown=function(t){t.preventDefault(),this.enableDrag=this.widgetCmp.getConfig().id,this.renderer.addClass(this.widgetCmp.getEl().nativeElement,"wg-resizing"),this.renderer.addClass(this.el.nativeElement,"dragging"),this.startPosition=this.gridCmp.getWidgetPosition(this.widgetCmp),this.startRender={top:Math.ceil(this.widgetCmp.getEl().nativeElement.offsetTop),left:Math.ceil(this.widgetCmp.getEl().nativeElement.offsetLeft),height:Math.floor(this.parentContainer.offsetHeight),width:Math.floor(this.parentContainer.offsetWidth)},this.startRender.bottom=this.startRender.top+this.startRender.height,this.startRender.right=this.startRender.left+this.startRender.width;var e=t.offsetX||t.layerX,i=t.offsetY||t.layerY;this.delta={top:0,right:0,bottom:0,left:0},this.draggerOffset={top:i,left:e,bottom:i-this.el.nativeElement.offsetHeight,right:e-this.el.nativeElement.offsetWidth},this.gridPositions=this.gridCmp.getGridRectangle(),"undefined"!=typeof PointerEvent?(window.addEventListener("pointermove",this._onMoveListener),window.addEventListener("pointerup",this._onUpListener)):(window.addEventListener("mousemove",this._onMoveListener),window.addEventListener("mouseup",this._onUpListener))},t.prototype.onMove=function(t){if(this.enableDrag===this.widgetCmp.getConfig().id){t.preventDefault();var e=t.clientX,i=t.clientY,r=this.gridPositions,o=this.startRender,n=Math.round(e)-r.left,s=Math.round(i)-r.top,h=this.delta;this.moveUpAllowed?(h.top=Math.min(Math.max(s-this.draggerOffset.top,0),r.height)-o.top,h.top=Math.min(h.top,o.height-42)):this.moveDownAllowed&&(h.bottom=o.bottom-Math.min(Math.max(s-this.draggerOffset.bottom,0),r.height),h.bottom=Math.min(h.bottom,o.height-42)),this.moveLeftAllowed?(h.left=Math.min(Math.max(n-this.draggerOffset.left,0),r.width)-o.left,h.left=Math.min(h.left,o.width-42)):this.moveRightAllowed&&(h.right=o.right-Math.min(Math.max(n-this.draggerOffset.right,0),r.width),h.right=Math.min(h.right,o.width-42));var d=this.determineFinalPos();this.gridCmp.highlightArea(d),this.renderer.setStyle(this.parentContainer,"top",this.delta.top+"px"),this.renderer.setStyle(this.parentContainer,"left",this.delta.left+"px"),this.renderer.setStyle(this.parentContainer,"bottom",this.delta.bottom+"px"),this.renderer.setStyle(this.parentContainer,"right",this.delta.right+"px")}},t.prototype.onUp=function(t){this.enableDrag===this.widgetCmp.getConfig().id&&(t.preventDefault(),this.el.nativeElement.setAttribute("draggable",!1),this.renderer.removeClass(this.el.nativeElement,"dragging"),this.renderer.removeClass(this.widgetCmp.getEl().nativeElement,"wg-resizing"),this.enableDrag=null,this.widgetCmp.position=this.determineFinalPos(),this.gridCmp.updateWidget(this.widgetCmp,!1),this.gridCmp.resetHighlights(),this.renderer.removeClass(this.widgetCmp.getEl().nativeElement,"wg-resizing"),this.renderer.removeClass(this.el.nativeElement,"dragging"),this.renderer.setStyle(this.parentContainer,"top",""),this.renderer.setStyle(this.parentContainer,"left",""),this.renderer.setStyle(this.parentContainer,"bottom",""),this.renderer.setStyle(this.parentContainer,"right","")),"undefined"!=typeof PointerEvent?(window.removeEventListener("pointermove",this._onMoveListener),window.removeEventListener("pointerup",this._onUpListener)):(window.removeEventListener("mousemove",this._onMoveListener),window.removeEventListener("mouseup",this._onUpListener))},t.prototype.findCollision=function(t,e,i,r){void 0===r&&(r=!1);for(var o=!1,n=t;n<=e;n++){if(r?this.gridCmp.isPointObstructed(n,i):this.gridCmp.isPointObstructed(i,n)){o=!0;break}}return o},t.prototype.determineFinalPos=function(){var t=new m,e=this.startRender,i=this.delta,r=this.gridCmp.rasterizeCoords(e.left+i.left+1,e.top+i.top+1),o=this.gridCmp.rasterizeCoords(e.right-i.right-1,e.bottom-i.bottom-1),n={top:r.top,left:r.left,right:o.left,bottom:o.top},s=Math.max(this.startPosition.left,n.left),h=Math.min(this.startPosition.right,n.right);if(this.moveUpAllowed&&n.top<this.startPosition.top)for(t.top=this.startPosition.top;t.top>n.top&&!this.findCollision(s,h,t.top-1);)t.top--;else if(this.moveDownAllowed&&n.bottom>this.startPosition.bottom)for(t.top=t.top||n.top,t.height=this.startPosition.bottom+1-this.startPosition.top;t.bottom<n.bottom&&!this.findCollision(s,h,t.bottom+1);)t.height++;if(t.top=t.top||n.top,t.height=t.height||n.bottom+1-t.top,this.moveLeftAllowed&&n.left<this.startPosition.left)for(t.left=this.startPosition.left;t.left>n.left&&!this.findCollision(t.top,t.bottom,t.left-1,!0);)t.left--;else if(this.moveRightAllowed&&n.right>this.startPosition.right)for(t.left=t.left||n.left,t.width=this.startPosition.right+1-this.startPosition.left;t.right<n.right&&!this.findCollision(t.top,t.bottom,t.right+1,!0);)t.width++;return t.left=t.left||n.left,t.width=t.width||n.right+1-t.left,t},t.decorators=[{type:r.Directive,args:[{selector:"[ngxWidgetResizer]"}]}],t.ctorParameters=function(){return[{type:r.ElementRef},{type:r.Renderer2},{type:p,decorators:[{type:r.Inject,args:[r.forwardRef(function(){return p})]}]},{type:g,decorators:[{type:r.Inject,args:[r.forwardRef(function(){return g})]}]}]},t.propDecorators={ngxWidgetResizer:[{type:r.Input}],onDown:[{type:r.HostListener,args:["pointerdown",["$event"]]},{type:r.HostListener,args:["mousedown",["$event"]]}]},t}(),v=function(){function t(){}return t.decorators=[{type:r.NgModule,args:[{imports:[i.CommonModule],declarations:[f,g,p,c,w],exports:[g,p]}]}],t}();t.NgxWidgetGridComponent=p,t.NgxGridOverlayComponent=f,t.NgxWidgetComponent=g,t.Cell=l,t.CellSize=o,t.Grid=n,t.GridRenderer=a,t.PathIterator=b,t.Rectangle=m,t.WidgetConfig=s,t.NgxWidgetGridModule=v,t.ɵa=c,t.ɵb=w,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-widget-grid.umd.min.js.map